---
# 常用定义

title: "可重构计算-第4章"           # 标题
date: 2023-02-05    # 创建时间
lastmod: 2023-02-12 # 最后修改时间
draft: false                       # 是否是草稿？
tags: ["可重构计算","CGRA"]  # 标签
categories: ["可重构计算读书笔记"]              # 分类
author: "李尚坤"                  # 作者


# 用户自定义

# 你可以选择 关闭(false) 或者 打开(true) 以下选项

comment: false   # 关闭评论
toc: true       # 关闭文章目录

# 你同样可以自定义文章的版权规则

contentCopyright: '<a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a>'
reward: false	 # 关闭打赏
mathjax: true    # 打开 mathjax
---



# 第4章 可重构计算处理器编译系统

输入应用程序，生成可重构计算处理器控制的控制码和数据通路的配置信息

## 4.1 可重构计算处理器编译框架与流程

- 编译器首先对代码进行变换和优化，生成中间表达式IR，然后将中间表达式映射到可重构计算阵列上。再对任务进行时域划分，最后生成控制码和配置信息
- 三项关键技术：**代码变化及优化**，**任务时域划分**，**映射配置的生成**

## 4.2 可重构计算处理器代码变化及优化

### 4.2.1 指令级变换

1. 树高度缩减

   对运算重新排序，减少运算树的高度

2. 运算强度缩减

   将一种运算转化为一系列成本更低的运算。比如乘法转换为移位或加减操作

3. 代码转移：上移与下移

   把同种表达式或者子表达式的重复运算放在常用路径上，缩减代码规模

### 4.2.2 循环级变换

- 减少循环开销的同时增加指令级并行的可能性
- 循环展开的两种策略：
  - 循环完全展开，只适用小循环
  - 最内层循环展开

## 4.3 可重构计算处理器任务划分

### 4.3.1 任务划分概述

- 当某个任务所需的计算资源超过目标硬件所能提供的计算资源时，需要对该任务进行划分
- 本书中指的主要是时域划分
- 划分的原则：
  - 完整性：划分前后功能一致
  - 独立性：划分不存在死锁，比如两个部分的数据存在相互依赖
  - 有效性

### 4.3.2 时域划分算法的相关研究

需要一个控制器来实现对配置信息流的控制，并且需要一定的机制来使不同配置信息进行数据通信

## 4.4 可重构计算处理器任务调度

- 将运算操作在时间和硬件资源上进行安排

## 4.5 可重构计算处理器映射配置生成

### 4.5.1 寄存器分配

- 并非所有变量都要寄存器，部分可以通过连线来实现

### 4.5.2 运算到硬件资源的映射

### 4.5.3 内存映射优化

1. 数组到内存资源的映射及划分

   将不同的数据分布到不同的内存中，可以提升每个时钟内循环操作的数目

2. 内存访问并行

3. 内存控制器的定制

   创建专门的硬件产生地址和对数据打包、拆包

4. 数据项的打包和拆包

   可以在非标准的数据类型格式下定义操作